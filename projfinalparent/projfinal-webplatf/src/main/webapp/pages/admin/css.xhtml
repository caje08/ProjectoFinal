<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <body>
        <ui:composition template="./mainadmin.xhtml"> 
            <ui:define name="content">
                <h:form enctype="multipart/form-data">
                    <!--List of Css -->

                    <p:dataTable var="item" value="#{stylesViewBB.lstCSS}" 
                                 paginator="true" rows="10" paginatorPosition="top" editable="false" 
                                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 rowsPerPageTemplate="10,20,30" selectionMode="single" rowKey="#{item.ccsId}" selection="#{stylesViewBB.selectedCSS}" >

                        <f:facet name="header">
                            List of Css
                        </f:facet>


                        <p:column style="width:16px">
                            <p:rowToggler />
                        </p:column>

                        <p:column styleClass="centeredColumn"  filterBy="#{item.name}" filterMatchMode="contains" headerText="CSS name"  style="width:20%">
                            <p:outputLabel value="#{item.name}" />
                        </p:column>

                        <p:column styleClass="centeredColumn" headerText="Creation date"  filterBy="#{item.creationDate}" filterMatchMode="contains" >
                            <h:outputText value="#{item.creationDate}" >
                                <f:convertDateTime type="DATE" pattern="dd/MM/yyyy"/>
                            </h:outputText>
                        </p:column>

                        <p:column styleClass="centeredColumn"  filterBy="#{item.address}" filterMatchMode="contains" headerText="Address"  style="width:20%">
                            <p:outputLabel value="#{item.address}" />
                        </p:column>

                        <p:column styleClass="centeredColumn"  filterBy="#{item.email}" filterMatchMode="contains" headerText="Email"  style="width:20%">
                            <p:outputLabel value="#{item.email}" />
                        </p:column>

                        <p:column styleClass="centeredColumn"  filterBy="#{item.phone}" filterMatchMode="contains" headerText="Phone"  style="width:20%">
                            <p:outputLabel value="#{item.phone}" />
                        </p:column>

                        <p:column styleClass="centeredColumn"  filterBy="#{item.fax}" filterMatchMode="contains" headerText="Fax"  style="width:20%">
                            <p:outputLabel value="#{item.fax}" />
                        </p:column>

                        <p:column styleClass="centeredColumn"  filterBy="#{item.latitudeCoordinate}" filterMatchMode="contains" headerText="Lat. coordinate"  style="width:20%">
                            <p:outputLabel value="#{item.latitudeCoordinate}" />
                        </p:column>

                        <p:column styleClass="centeredColumn"  filterBy="#{item.longitudeCoordinate}" filterMatchMode="contains" headerText="Long. coordinate"  style="width:20%">
                            <p:outputLabel value="#{item.longitudeCoordinate}" />
                        </p:column>

                        <p:column styleClass="centeredColumn"   headerText="In Use"  style="width:15%">
                            <p:commandButton rendered="#{item.inUse}" icon="ui-icon-check"/>
                            <p:commandButton rendered="#{!item.inUse}"  icon="ui-icon-refresh" oncomplete="PF('useguide').show();" update=":inuse">
                                <f:setPropertyActionListener value="#{item}" target="#{stylesViewBB.selectedCSS}"  />
                            </p:commandButton> 
                        </p:column>



                        <p:column styleClass="centeredColumn" headerText="Edit CSS"  style="width:15%">
                            <p:commandButton rendered="#{stylesViewBB.canEdit(item)}"  icon="ui-icon-wrench " oncomplete="PF('editCss').show()" update=":editStyle" process="@this" >
                                <f:setPropertyActionListener value="#{item}" target="#{stylesViewBB.selectedCSS}"/>
                            </p:commandButton>
                        </p:column>

                        <p:column styleClass="centeredColumn" headerText="Remove CSS"  style="width:15%">
                            <p:commandButton  rendered="#{stylesViewBB.canEdit(item)}" icon="ui-icon-minus" oncomplete="PF('removeCss').show()" update=":removeStyle" process="@this" >
                                <f:setPropertyActionListener value="#{item}" target="#{stylesViewBB.selectedCSS}"   />
                            </p:commandButton>
                        </p:column>

                        <p:rowExpansion>
                            <h3> Company Description </h3>
                            <p:inputTextarea disabled="true" value="#{item.companyDescription}" style="width: 1000px;" />
                        </p:rowExpansion>
                    </p:dataTable>
                </h:form>

                <!--Edit Css-->

                <h:form id="editStyle">
                    <p:dialog id="editStyleDialog" header="EDIT CSS" widgetVar="editCss" modal="true" height="auto" width="auto">
                        <h3> Edit selected Css </h3>
                        <h:panelGrid columns="4">
                            <p:outputLabel value="Company adress"/>
                            <p:inputText value="#{stylesViewBB.selectedCSS.address}" required="true" requiredMessage="Must introduce an address"/>
                            <h:outputLabel value="Company phone"/>
                            <p:inputText value="#{stylesViewBB.selectedCSS.phone}" required="true" requiredMessage="Must introduce a phone"/>
                            <h:outputLabel value="Company Fax"/>
                            <p:inputText value="#{stylesViewBB.selectedCSS.fax}" required="true" requiredMessage="Must introduce a fax"/>
                            <h:outputLabel value="Company Email"/>
                            <p:inputText value="#{stylesViewBB.selectedCSS.email}" required="true" requiredMessage="Must introduce an email"/>
                            <h:outputLabel value="Latitude coordinate of company"/>
                            <p:inputText value="#{stylesViewBB.selectedCSS.latitudeCoordinate}" required="true" requiredMessage="Must introduce west coordenadas"/>
                            <h:outputLabel value="Longitude coordinate of company"/>
                            <p:inputText value="#{stylesViewBB.selectedCSS.longitudeCoordinate}" required="true" requiredMessage="Must introduce east coordenadas"/>
                        </h:panelGrid>
                        <p:inputTextarea style="width: 900px; height:50px; " value="#{stylesViewBB.selectedCSS.companyDescription}" required="true" requiredMessage="Must introduce a company description"/>
                        <h:panelGrid columns="6">
                            <p:outputLabel value="Background color of Platform main content template"/>
                            <p:colorPicker  value="#{stylesViewBB.selectedCSS.backgroundPlatformContentTemplateColor}"/>
                            <p:outputLabel value="Background color of Platform top template"/>
                            <p:colorPicker  value="#{stylesViewBB.selectedCSS.backgroundTopPlatformTemplateColor}" />
                            <p:outputLabel value="Background color of Applicant main content template"/>
                            <p:colorPicker  value="#{stylesViewBB.selectedCSS.backgroundApplicantContentTemplateColor}"/>
                            <p:outputLabel value="Background color of Applicant bottom template"/>
                            <p:colorPicker  value="#{stylesViewBB.selectedCSS.backgroundBottomApplicantColor}"/>
                            <p:outputLabel value="Background color of Applicant top template  "/>
                            <p:colorPicker  value="#{stylesViewBB.selectedCSS.backgroundTopApplicantColor}"/>
                            <p:outputLabel value="Background color of buttons"/>
                            <p:colorPicker  value="#{stylesViewBB.selectedCSS.backgroundButtonColor}"/>
                            <p:outputLabel value="Label color of button"/>
                            <p:colorPicker  value="#{stylesViewBB.selectedCSS.labelButtonColor}"/>
                            <p:outputLabel value="Label color of command links"/>
                            <p:colorPicker  value="#{stylesViewBB.selectedCSS.labelCommandLink}"/>
                            <p:outputLabel value="Label color of Applicant template"/>
                            <p:colorPicker  value="#{stylesViewBB.selectedCSS.labelApplicantTemplateColor}"/>
                            <p:outputLabel value="Label color of Platform template"/>
                            <p:colorPicker  value="#{stylesViewBB.selectedCSS.labelPlatformTemplateColor}"/>

                        </h:panelGrid>
                        <div align="center">
                            <h:commandButton value="Edit" class="myButton" action="#{stylesViewBB.editCss()}"/>
                        </div>
                    </p:dialog>
                </h:form>

                <!--Remove Css-->

                <h:form id="removeStyle">
                    <p:dialog id="editStyleDialog" header="Remove CSS" widgetVar="removeCss" modal="true" height="auto" width="auto">
                        <h3> Remove #{stylesViewBB.selectedCSS.name} </h3>
                        <h:panelGrid columns="3" columnClasses="rightalign" cellpadding="0" cellspacing="2">
                            <h:outputLabel value="Are you sure you want to remove this CSS?"/>
                            <h:commandButton action="#{stylesViewBB.removeCSS()}" value="Yes"/>
                            <h:commandButton action="guides?faces-redirect=true" value="Cancel"/>
                        </h:panelGrid>
                    </p:dialog>
                </h:form>



                <!--Pop up to change css in use-->

                <h:form id="inuse">
                    <p:dialog  header="Edit in Use" widgetVar="useguide" modal="true" height="auto" width="auto">
                        <h:panelGrid columns="3" columnClasses="rightalign" cellpadding="0" cellspacing="2">
                            <h:outputLabel value="Are you sure you want to use this CSS?"/>
                            <h:commandButton action="#{stylesViewBB.editInUseCss()}" value="Yes"/>
                            <h:commandButton action="css.chtml?faces-redirect=true" value="Cancel"/>
                        </h:panelGrid>
                    </p:dialog>
                </h:form>
            </ui:define>
        </ui:composition>
    </body>
</html>
